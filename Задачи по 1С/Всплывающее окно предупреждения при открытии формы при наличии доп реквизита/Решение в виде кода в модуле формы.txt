&После ("ПриОткрытии")
&НаКлиенте
Процедура ТэстоСБ_ПриОткрытии(Отказ)
   // сбз // Начало // ЕнцовАЮ.
   сбз_УстановитьВидимостьДоступность();
   // сбз \\ Конец \\ 
   
   // сбз // Начало // Пушно 20181009 
   ОбновитьОстатки();
   // сбз \\ Конец \\ 
   
   // СБЗ // Sigittarius
   // Если заказ уже создан(Ключ не пустой), при открытии активна вкладка Товары.
   АктивизацияЗакладкиТовары(Параметры.Ключ.Пустая()); 
   // СБЗ Конец
   
   // Предупреждение    
   ТекстПредупреждения = ПредупреждениеПриВыбореНоменклатуры(Объект.Ссылка);
   Если ЗначениеЗаполнено(ТекстПредупреждения) Тогда
      ПоказатьПредупреждение(,ТекстПредупреждения);
   КонецЕсли;
КонецПроцедуры

&НаСервере
// Sigittarius // Функция возвращает текст Доп. реквизита "Комментарий" выбранной номенклатуры 
// для отображения его во всплывающем окне, если для выбранной номенклатуры в Доп. реквизите "Сообщать" стоит галка.
Функция ПредупреждениеПриВыбореНоменклатуры(Ссылка)   
   ТекстПредупреждения = "";
   
   Для каждого Товары Из Ссылка.Товары Цикл
      Номенклатура = Товары.Номенклатура;
      ПВХ_Комментарий = ПланыВидовХарактеристик.ДополнительныеРеквизитыИСведения.НайтиПоНаименованию("КомментарийПредупреждение");
      
      Если ЗначениеЗаполнено(ПВХ_Комментарий) Тогда
         СтрокаКомментарий = Номенклатура.ДополнительныеРеквизиты.Найти(ПВХ_Комментарий);
         Если ЗначениеЗаполнено(СтрокаКомментарий) Тогда
            ТекстПредупреждения = ТекстПредупреждения + Номенклатура + " - " + СтрокаКомментарий.Значение + ";" + Символы.ПС;          
         КонецЕсли;
      КонецЕсли;  
   КонецЦикла;
   
   Возврат ТекстПредупреждения;
КонецФункции