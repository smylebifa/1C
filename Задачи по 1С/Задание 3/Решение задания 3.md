## Решение

```
// Проверка - является ли элемент родителем (группой)
&НаСервере
Функция ЭтотЭлементГруппа(ТекЭлемент) 
  ПроверкаНаГруппу = Новый Запрос(
  "ВЫБРАТЬ
  |Значения.Родитель
  |ИЗ
  | Справочник.ЗначенияСвойствОбъектовИерархия КАК Значения
  |ГДЕ
  | Значения.Владелец = &Владелец И Значения.Родитель.Ссылка = &Ссылка");
       
  ПроверкаНаГруппу.УстановитьПараметр("Владелец", ТекЭлемент.Владелец);
  ПроверкаНаГруппу.УстановитьПараметр("Ссылка", ТекЭлемент);

  ЭлементГруппа = Не ПроверкаНаГруппу.Выполнить().Пустой();
     
  Возврат ЭлементГруппа;
КонецФункции


&НаСервере
Функция ВызываемаяФормаИзДопРеквизитаГруппаКлиентов(ДопРеквизит)
  Если ДопРеквизит = ПланыВидовХарактеристик.ДополнительныеРеквизитыИСведения.НайтиПоНаименованию("Группа Клиентов") Тогда 
    Возврат Истина;
    
  Иначе Возврат Ложь;
    
  КонецЕсли;
КонецФункции


&НаКлиенте
Процедура ТэстоСБ_СписокВыборПосле(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
  ДопРеквизитВызвавшийФорму = Элемент.Родитель.Свойство;
  
  Если ВызываемаяФормаИзДопРеквизитаГруппаКлиентов(ДопРеквизитВызвавшийФорму) Тогда
    Если ЭтотЭлементГруппа(ВыбраннаяСтрока) Тогда 
      Сообщить("Выбранный элемент является группой. Выберите подчиненный элемент.");  
      СтандартнаяОбработка = Ложь;
      
    Иначе 
      Поле = ВыбраннаяСтрока;
      
    КонецЕсли;
  КонецЕсли;  
КонецПроцедуры
```