# Особенности платформы 1С и работы в ней


## Подсистемы

За разделы, которые отображаются в режиме 1С Предприятие, отвечают подсистемы, в которые можно включать другие элементы конфигурации (документы, обработки, и т.д.). Добавление подсистемы для объекта осуществляется на вкладке "Дополнительно" (вызов контекстного меню, нажатием правой кнопкой мыши на объект конфигурации).



## Версии программ 1С

Версию программы 1С можно узнать в конфигураторе нажав на кнопку i (показать информацию о программе).



## Возможности, предоставляемые системой, в режиме 1С Предприятие

Для обращения к объектам конфигурации в режиме 1С предприятия нужно открыть "Главное меню" и выбрать "Все функции".

Для добавления дополнительных реквизитов необходимо перейти в режиме 1С Предприятие в раздел "Адмнистрирование - Общие настройки - Дополнительные реквизиты".

Открытие консоли запросов и обработки осуществляется через вызов меню и выбор файла для открытия.

Для удаления помеченных объектов на удаление необходимо перейти в раздел "Администрирование – Удаление помеченных объектов".



## Обновление конфигураций и расширений

Обновление расширения можно осуществлять из конфигуратора или из режима 1С Предприятие.

1. Для обновления из конфигуратора необходимо открыть "Расширения конфигурации", выбрать необходимое расширение и нажать на кнопку обновить.

2. Для обновления в режиме 1С Предприятие необходимо предварительно закрыть конфигурацию, далее запустить 1С Предприятие и зайти в раздел "Администрирование - Печатные формы и обработки - Расширения". Далее необходимо выбрать расширение и выбрать опцию "Обновить из файла на диске", после чего перезапустить.



## Модули

Для добавления новых методов для СправочникОбъект/СправочникМенеджер/Глобальный контекст необходимо зайти в модуль объекта/менеджера/управляемого приложения и описать соответсвующую функцию с указанием ключевого слова "Экспорт". События переопределяются в модуле объекта/менеджера/управляемого приложения.

Для вызова процедуры из различных модулей ее следует вынести в общий модуль.



### Структура программного модуля

1. Раздел объявления переменных.
2. Раздел процедур и функций.
3. Раздел основной программы.

> Порядок функций не имеет значения



## Работа с формами

Управляемая форма - адаптивная форма, которая конструируется во время выполнения, может быть разной для различных пользователей.

Управляемая форма состоит из элементов (слева) и реквизитов (справа).

Для группировки элементов на форме создается "обычная группа без отображения", указывается свойство группировки (например, "горизонтальная всегда") и добавляются элементы в созданную группу.

Для добавления переключателя необходимо на вкладке "Использование" выбрать "СписокВыбора" и добавить значения. Далее необходимо в разделе "Основные" выбрать для свойства "Вид" значение "ПолеПереключателя" и свойства "ВидПереключателя" значение "Тумблер". Для типа перечисления в списке выбора можно автоматически заполнить значения.

Если реквизит создается на уровне формы, то он не сохраняется. Он может использоваться для отображения данных из других документов и объектов конфигурации.

Чтобы скрыть командную панель необходимо снять флаг у свойства "Автозаполнение".

Чтобы пользователь не мог изменять значения данных небходимо в разделе использование снять галочку у свойства "ИзменятьСоставСтрок".



## Отладчик

"Шагнуть в" позволяет в момент вызова функции перейти к определению функции.

"Шагнуть через" пропускает процедуру, выполняя при этом ее инструкции.

Также можно установить добавить перед строкой условие останова (синий кружок).

Команда "Текущая строка" позволяет вернуться к строке на которой остановилась программа.

"Замер производительности" нажимается до выполнения операции и после.



## Пример создания внешней обработки

Создаем новый документ "Внешняя обработка". Далее создаем форму. В списке реквизитов создаем новый реквизит с типом "Таблица значений" или "Дерево значений". Далее добавляем колонки созданному списку или дереву значений и переносим главный список или дерево значений в элементы. Далее можно создать команду, перенести на командную панель и добавить событие команде.


### Порядок создания внешней обработки для печатной формы

1. В конфигурации создать новый файл типа "внешняя обработка". 

2. Подключить можно из "Администрирование - Печатные формы, отчеты и обработки - Дополнительные отчеты и обработки" добавление существующей сохраненной ранее внешней обработки. Также нужно указать размещение, то есть в каком справочнике, документе или другом объекте она вызывается. 

3. В самой обработки  можно указать макет который будет отображаться при выполнении обработки. Основной код написан в модуле объекта, где хранятся стандартные функции - "СведенияОВнешнейОбработки", "ПолучитьТаблицуКоманд", "ДобавитьКоманду", "Печать", "СФормироватьПечатнуюФорму". В последней описывается заполнение макета. В первых формируется структура обработки.



## Модели доступа к данным

1. Объектная (получение данных из базы с помощью методов объекта) - применима, когда не требуется производить сложные отборы, применима к одной таблице.
2. Табличная (для чтения данных из базы используются запросы) - можно использовать несколько таблиц.



## Правила внесения изменений в хранилище при групповой разработке

1. Захватить нужный объект
2. Изменить объект
3. Проверить внесенные изменения
4. Поместить объект в хранилище



## Команды

При создании команды объекта необходимо в свойствах указать группу, например "Командная панель формы Важное" и тип параметра команды, например "СправочникСсылка.Контрагенты". Созданная команда объекта будет отображаться в форме списка и отдельного документа.



## Регистры сведений, накопления

Регистры сведений - единственные среди регистров не зависящие от документов (записи в регистры, как правило, попадают при проведении документа). 

В документе в разделе "Движения" можно посмотреть используемые регистры, а также воспользоваться конструктором движения, в котором необходимо сопоставить данные из документа с данными из регистра.

Для добавления движений документу, необходимо вызвать контекстное меню и выбрать "конструкторы - конструктор движений". При запуске конструктора может быть сказано, что будет замещена обработка движения, согласиться с данным вариантом. В случае использования нескольких регистров необходимо их добавить в открывшемся конструкторе движений.

В случае указания режима записи "Подчинение регистратору" необходимо указать регистраторов в соотвествующем разделе. 



## Макеты

Макеты используются в печатных формах. Для указания типа "Параметр" для поля необходимо открыть его свойства и у свойства "Заполнение" выбрать значение "Параметр".



## Другие особенности

Для создания объекта конфигурации "Планы счетов" предварительно создаем "Планы видов характеристик" и указываем его в "Субконто" в плане счетов.

Существует 3 фильтра, влияющих на формирование форм - "Роли", "Функциональные опции", "Настройки Формы".

После создания роли на вкладке "Общие" создаются пользователи, которым назначаются соответствующие роли.

